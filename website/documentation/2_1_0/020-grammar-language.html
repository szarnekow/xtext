<br style="clear:both;height:1em;">
	<div id="leftcol">
		<div class="nav-logo">
			<a href="index.php"><img src="logo.png" style="margin-left:10px; width:155px"/></a>
		</div>
		<ul id="leftnav">
		<li class="partentry" >
		Getting Started
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="005-installation.php">Installation</a></div>
		<ul style="display: none;" id="subToc_005-installation.html">
		<li id="005-installation.html#InstallDistro" ><a href="005-installation.php#InstallDistro" >Install Pre-Configured Eclipse With Xtext</a></li>
		<li id="005-installation.html#InstallXtext" ><a href="005-installation.php#InstallXtext" >Install Xtext From Update Site</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="010-xtext-in-5-minutes.php">5 Minutes Tutorial</a></div>
		<ul style="display: none;" id="subToc_010-xtext-in-5-minutes.html">
		<li id="010-xtext-in-5-minutes.html#NewProject" ><a href="010-xtext-in-5-minutes.php#NewProject" >Creating A New Xtext Project</a></li>
		<li id="010-xtext-in-5-minutes.html#RunWorkflow" ><a href="010-xtext-in-5-minutes.php#RunWorkflow" >Generating The Language Infrastructure</a></li>
		<li id="010-xtext-in-5-minutes.html#TestingTheEditor" ><a href="010-xtext-in-5-minutes.php#TestingTheEditor" >Try The Editor</a></li>
		<li id="010-xtext-in-5-minutes.html#Conclusion" ><a href="010-xtext-in-5-minutes.php#Conclusion" >Conclusion</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="020-domainmodel-step-by-step.php">15 Minutes Tutorial</a></div>
		<ul style="display: none;" id="subToc_020-domainmodel-step-by-step.html">
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_4" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_4" >Create A New Xtext Project</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_5" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_5" >Write Your Own Grammar</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_6" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_6" >Generate Language Artifacts</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_7" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_7" >Run the Generated IDE Plug-in</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_8" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_8" >Second Iteration : Adding Packages and Imports</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="030-tutorial-next-steps.php">15 Minutes Tutorial - Extended</a></div>
		<ul style="display: none;" id="subToc_030-tutorial-next-steps.html">
		<li id="040-first-code-generator.html" ><a href="040-first-code-generator.php" >Writing a Code Generator With Xtend</a></li>
		<li id="060-unit-tests.html" ><a href="060-unit-tests.php" >Unit Testing the Language</a></li>
		<li id="050-validation.html" ><a href="050-validation.php" >Creating Custom Validation Rules</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="035-domainmodel-java.php">Five simple steps to your JVM language</a></div>
		<ul style="display: none;" id="subToc_035-domainmodel-java.html">
		<li id="035-domainmodel-java.html#JvmDomainmodel_7" ><a href="035-domainmodel-java.php#JvmDomainmodel_7" >Step One: Create A New Xtext Project</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_8" ><a href="035-domainmodel-java.php#JvmDomainmodel_8" >Step Two: Write the Grammar</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_9" ><a href="035-domainmodel-java.php#JvmDomainmodel_9" >Step Three: Generate Language Artifacts</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_10" ><a href="035-domainmodel-java.php#JvmDomainmodel_10" >Step Four: Define the Mapping to JVM Concepts</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_11" ><a href="035-domainmodel-java.php#JvmDomainmodel_11" >Step Five : Try the Editor!</a></li>
		</ul>
		</li>
		<li class="partentry" >
		Reference Documentation
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="000-introduction.php">Overview</a></div>
		<ul style="display: none;" id="subToc_000-introduction.html">
		<li id="000-introduction.html#Overview_1" ><a href="000-introduction.php#Overview_1" >What is Xtext?</a></li>
		<li id="000-introduction.html#Overview_2" ><a href="000-introduction.php#Overview_2" >How Does It Work?</a></li>
		<li id="000-introduction.html#Overview_3" ><a href="000-introduction.php#Overview_3" >Xtext is Highly Configurable</a></li>
		<li id="000-introduction.html#Overview_4" ><a href="000-introduction.php#Overview_4" >Who Uses Xtext?</a></li>
		<li id="000-introduction.html#Overview_5" ><a href="000-introduction.php#Overview_5" >Who is Behind Xtext?</a></li>
		<li id="000-introduction.html#DSL" ><a href="000-introduction.php#DSL" >What is a Domain-Specific Language</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="020-grammar-language.php">The Grammar Language</a></div>
		<ul style="display: none;" id="subToc_020-grammar-language.html">
		<li id="020-grammar-language.html#statemachine" ><a href="020-grammar-language.php#statemachine" >A First Example</a></li>
		<li id="020-grammar-language.html#syntax" ><a href="020-grammar-language.php#syntax" >The Syntax</a></li>
		<li id="020-grammar-language.html#metamodelInference" ><a href="020-grammar-language.php#metamodelInference" >Ecore Model Inference</a></li>
		<li id="020-grammar-language.html#grammarMixins" ><a href="020-grammar-language.php#grammarMixins" >Grammar Mixins</a></li>
		<li id="020-grammar-language.html#grammarLanguage_6" ><a href="020-grammar-language.php#grammarLanguage_6" >Common Terminals</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="030-generator.php">Configuration</a></div>
		<ul style="display: none;" id="subToc_030-generator.html">
		<li id="030-generator.html#generator" ><a href="030-generator.php#generator" >The Language Generator</a></li>
		<li id="040-dependency-injection.html" ><a href="040-dependency-injection.php" >Dependency Injection in Xtext with Google Guice</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="050-heading-runtime.php">Runtime Concepts</a></div>
		<ul style="display: none;" id="subToc_050-heading-runtime.html">
		<li id="050-heading-runtime.html#runtimeSetup" ><a href="050-heading-runtime.php#runtimeSetup" >Runtime Setup (ISetup)</a></li>
		<li id="050-heading-runtime.html#equinoxSetup" ><a href="050-heading-runtime.php#equinoxSetup" >Setup within Eclipse-Equinox (OSGi)</a></li>
		<li id="050-heading-runtime.html#runtime_concepts_4" ><a href="050-heading-runtime.php#runtime_concepts_4" >Logging</a></li>
		<li id="060-validation.html" ><a href="060-validation.php" >Validation</a></li>
		<li id="070-linking.html" ><a href="070-linking.php" >Linking</a></li>
		<li id="080-scoping.html" ><a href="080-scoping.php" >Scoping</a></li>
		<li id="090-valueconverter.html" ><a href="090-valueconverter.php" >Value Converter</a></li>
		<li id="100-serialization.html" ><a href="100-serialization.php" >Serialization</a></li>
		<li id="105-formatting.html" ><a href="105-formatting.php" >Formatting (Pretty Printing)</a></li>
		<li id="110-fragmentprovider.html" ><a href="110-fragmentprovider.php" >Fragment Provider (Referencing Xtext Models From Other EMF Artifacts)</a></li>
		<li id="115-encoding.html" ><a href="115-encoding.php" >Encoding in Xtext</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="120-heading-UI.php">IDE Concepts</a></div>
		<ul style="display: none;" id="subToc_120-heading-UI.html">
		<li id="140-labelprovider.html" ><a href="140-labelprovider.php" >Label Provider</a></li>
		<li id="150-contentassist.html" ><a href="150-contentassist.php" >Content Assist</a></li>
		<li id="155-quickfix.html" ><a href="155-quickfix.php" >Quick Fixes</a></li>
		<li id="160-templates.html" ><a href="160-templates.php" >Template Proposals</a></li>
		<li id="170-outline.html" ><a href="170-outline.php" >Outline View</a></li>
		<li id="180-hyperlinking.html" ><a href="180-hyperlinking.php" >Hyperlinking</a></li>
		<li id="195-highlighting.html" ><a href="195-highlighting.php" >Syntax Coloring</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="199-xtext-and-java.php">Xtext and Java</a></div>
		<ul style="display: none;" id="subToc_199-xtext-and-java.html">
		<li id="199-xtext-and-java.html#Xbase_3" ><a href="199-xtext-and-java.php#Xbase_3" >Plug-in Setup</a></li>
		<li id="199a-jvmtypes.html" ><a href="199a-jvmtypes.php" >Referring to Java Elements using JVM Types</a></li>
		<li id="199b-xbase-java-references.html" ><a href="199b-xbase-java-references.php" >Referring to Java Types Using Xbase</a></li>
		<li id="199c-xbase-inferred-type.html" ><a href="199c-xbase-inferred-type.php" >Inferring a JVM Model</a></li>
		<li id="199d-xbase-expressions.html" ><a href="199d-xbase-expressions.php" >Using Xbase Expressions</a></li>
		<li id="199e-xbase-language-reference.html" ><a href="199e-xbase-language-reference.php" >Xbase Language Reference</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="118-mwe-in-depth.php">MWE2</a></div>
		<ul style="display: none;" id="subToc_118-mwe-in-depth.html">
		<li id="118-mwe-in-depth.html#MWE2Exampe" ><a href="118-mwe-in-depth.php#MWE2Exampe" >Examples</a></li>
		<li id="118-mwe-in-depth.html#MWE2LanguageReference" ><a href="118-mwe-in-depth.php#MWE2LanguageReference" >Language Reference</a></li>
		<li id="118-mwe-in-depth.html#MWE2SyntaxReference" ><a href="118-mwe-in-depth.php#MWE2SyntaxReference" >Syntax Reference</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="01-Xtend_Introduction.php">Xtend</a></div>
		<ul style="display: none;" id="subToc_01-Xtend_Introduction.html">
		<li id="01-Xtend_Introduction.html#Getting_Started" ><a href="01-Xtend_Introduction.php#Getting_Started" >Getting Started</a></li>
		<li id="02-Xtend_Classes_Functions.html" ><a href="02-Xtend_Classes_Functions.php" >Classes and Functions</a></li>
		<li id="03-Xtend_Expressions.html" ><a href="03-Xtend_Expressions.php" >Expressions</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="210-emf-integration.php">Integration with EMF and Other EMF Editors</a></div>
		<ul style="display: none;" id="subToc_210-emf-integration.html">
		<li id="210-emf-integration.html#model_metamodel" ><a href="210-emf-integration.php#model_metamodel" >Model, Ecore Model, and Ecore</a></li>
		<li id="210-emf-integration.html#emf_codegen" ><a href="210-emf-integration.php#emf_codegen" >EMF Code Generation</a></li>
		<li id="210-emf-integration.html#xtext_resource" ><a href="210-emf-integration.php#xtext_resource" >XtextResource Implementation</a></li>
		<li id="210-emf-integration.html#gmf_integration" ><a href="210-emf-integration.php#gmf_integration" >Integration with GMF Editors</a></li>
		</ul>
		</li>
		<li class="partentry" >
		Appendix
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="213-migrating-from-1.0.php">Migrating from Xtext 1.0.x to 2.0</a></div>
		<ul style="display: none;" id="subToc_213-migrating-from-1.0.html">
		<li id="213-migrating-from-1.0.html#migrating_from_1_0_x_4" ><a href="213-migrating-from-1.0.php#migrating_from_1_0_x_4" >Take the Shortcut</a></li>
		<li id="213-migrating-from-1.0.html#migrating_from_1_0_x_5" ><a href="213-migrating-from-1.0.php#migrating_from_1_0_x_5" >Migrating Step By Step</a></li>
		<li id="213-migrating-from-1.0.html#migrating_from_1_0_x_6" ><a href="213-migrating-from-1.0.php#migrating_from_1_0_x_6" >Now go for then new features</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="215-migrating-from-0.7.php">Migrating from Xtext 0.7.x to 1.0</a></div>
		<ul style="display: none;" id="subToc_215-migrating-from-0.7.html">
		<li id="215-migrating-from-0.7.html#migrating_from_0_7_2" ><a href="215-migrating-from-0.7.php#migrating_from_0_7_2" >Migrating Step By Step</a></li>
		</ul>
		</li>
		</ul>
	</div>
	<div id="midcolumn">
		<a name="grammarLanguage" ></a>
		<h1>The Grammar Language</h1>
				<div class="toc">
				  <ul>
				    <li><a href="020-grammar-language.php#statemachine" >A First Example</a></li>
				    <li><a href="020-grammar-language.php#syntax" >The Syntax</a></li>
				    <li><a href="020-grammar-language.php#metamodelInference" >Ecore Model Inference</a></li>
				    <li><a href="020-grammar-language.php#grammarMixins" >Grammar Mixins</a></li>
				    <li><a href="020-grammar-language.php#grammarLanguage_6" >Common Terminals</a></li>
				  </ul>
				</div>
				
		<p>
		The <a href="http://git.eclipse.org/c/tmf/org.eclipse.xtext.git/tree/plugins/org.eclipse.xtext/src/org/eclipse/xtext/Xtext.xtext" >grammar language</a> 
		is the corner stone of Xtext. It is a domain-specific language, carefully designed for the description of textual languages.
		The main idea is to describe the concrete syntax and how it is mapped to an in-memory representation
		- the semantic model. This model will be produced by the parser on-the-fly when it consumes an input file.
		</p>
		<a name="statemachine" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>A First Example</h1>
			<p>
			To get an idea of how it works we'll start by implementing a <a href="http://martinfowler.com/bliki/SyntacticNoise.html" >simple example</a> 
			introduced by Martin Fowler. It's mainly about describing state machines that are used as the (un)lock mechanism of secret compartments.
			People who have secret compartments control their access in a very old-school way, e.g. by opening a draw first and 
			turning on the light afterwards. Then the secret compartment, for instance a panel, opens up. One of those state machines 
			could look like this:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">events</span><br/>
						&nbsp;&nbsp;doorClosed&nbsp;&nbsp;D1CL<br/>
						&nbsp;&nbsp;drawOpened&nbsp;&nbsp;D2OP<br/>
						&nbsp;&nbsp;lightOn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L1ON<br/>
						&nbsp;&nbsp;doorOpened&nbsp;&nbsp;D1OP<br/>
						&nbsp;&nbsp;panelClosed&nbsp;PNCL<br/>
						&nbsp;<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">resetEvents</span>&nbsp;<br/>
						&nbsp;&nbsp;doorOpened&nbsp;D1OP<br/>
						<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">commands</span><br/>
						&nbsp;&nbsp;unlockPanel&nbsp;PNUL<br/>
						&nbsp;&nbsp;lockPanel&nbsp;&nbsp;&nbsp;PNLK<br/>
						&nbsp;&nbsp;lockDoor&nbsp;&nbsp;&nbsp;&nbsp;D1LK<br/>
						&nbsp;&nbsp;unlockDoor&nbsp;&nbsp;D1UL<br/>
						<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">state</span>&nbsp;idle<br/>
						&nbsp;&nbsp;<span class="keyword">actions</span>&nbsp;{unlockDoor&nbsp;lockPanel}<br/>
						&nbsp;&nbsp;doorClosed&nbsp;=&gt;&nbsp;active<br/>
						<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">state</span>&nbsp;active<br/>
						&nbsp;&nbsp;drawOpened&nbsp;=&gt;&nbsp;waitingForLight<br/>
						&nbsp;&nbsp;lightOn&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;waitingForDraw<br/>
						<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">state</span>&nbsp;waitingForLight<br/>
						&nbsp;&nbsp;lightOn&nbsp;=&gt;&nbsp;unlockedPanel<br/>
						<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">state</span>&nbsp;waitingForDraw<br/>
						&nbsp;&nbsp;drawOpened&nbsp;=&gt;&nbsp;unlockedPanel<br/>
						<span class="keyword">end</span><br/>
						&nbsp;<br/>
						<span class="keyword">state</span>&nbsp;unlockedPanel<br/>
						&nbsp;&nbsp;<span class="keyword">actions</span>&nbsp;{unlockPanel&nbsp;lockDoor}<br/>
						&nbsp;&nbsp;panelClosed&nbsp;=&gt;&nbsp;idle<br/>
						<span class="keyword">end</span>
					</p>
				</div>
			</div>
			</p>
			<p>
			What we have are a bunch of declared events, commands, and states. Some events are addiitonally marked
			as being reset events. Within states there are references to declared actions. Actions should be executed 
			when entering the state. Furthermore, there are transitions consisting of a reference to an event and a 
			state.
			</p>
			<p>
			The first thing that you have to do in order to implement this tiny state machine example with Xtext,
			is to provide a grammar. It could look like this example:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">grammar</span>&nbsp;org.xtext.example.SecretCompartments&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;<span class="keyword">with</span>&nbsp;org.eclipse.xtext.common.Terminals<br/>
						<br/>
						<span class="keyword">generate</span>&nbsp;secrets&nbsp;<span class="string">"http://www.eclipse.org/secretcompartment"</span><br/>
						&nbsp;<br/>
						Statemachine&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">&apos;events&apos;</span><br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(events+=Event)+<br/>
						&nbsp;&nbsp;<span class="string">&apos;end&apos;</span><br/>
						&nbsp;&nbsp;(<span class="string">&apos;resetEvents&apos;</span><br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(resetEvents+=[Event])+<br/>
						&nbsp;&nbsp;<span class="string">&apos;end&apos;</span>)?<br/>
						&nbsp;&nbsp;<span class="string">&apos;commands&apos;</span><br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(commands+=Command)+<br/>
						&nbsp;&nbsp;<span class="string">&apos;end&apos;</span><br/>
						&nbsp;&nbsp;(states+=State)+;<br/>
						&nbsp;<br/>
						Event&nbsp;:<br/>
						&nbsp;&nbsp;name=ID&nbsp;code=ID;<br/>
						&nbsp;<br/>
						Command&nbsp;:<br/>
						&nbsp;&nbsp;name=ID&nbsp;code=ID;<br/>
						&nbsp;<br/>
						State&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">&apos;state&apos;</span>&nbsp;name=ID<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="string">&apos;actions&apos;</span>&nbsp;<span class="string">&apos;{&apos;</span>&nbsp;(actions+=[Command])+&nbsp;<span class="string">&apos;}&apos;</span>)?<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(transitions+=Transition)*<br/>
						&nbsp;&nbsp;<span class="string">&apos;end&apos;</span>;<br/>
						&nbsp;<br/>
						Transition&nbsp;:<br/>
						&nbsp;&nbsp;event=[Event]&nbsp;<span class="string">&apos;=&gt;&apos;</span>&nbsp;state=[State];
					</p>
				</div>
			</div>
			</p>
			<p>
			Martin Fowler uses this example throughout his book <a href="http://martinfowler.com/books.html#dsl" >Domain
			Specific Languages</a> to implement external and internal DSLs using
			different technologies. Note, that none of his implementations is nearly as readable and concise as the description in
			Xtext's grammar language above. That is of course because the grammar language is designed to do just that, i.e. it is 
			specific to the domain of language descriptions.
			</p>
		<a name="syntax" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>The Syntax</h1>
			<div class="toc">
			  <ul>
			    <li><a href="020-grammar-language.php#syntax_2" >Language Declaration</a></li>
			    <li><a href="020-grammar-language.php#package_declarations" >EPackage Declarations</a></li>
			    <li><a href="020-grammar-language.php#syntax_4" >Rules</a></li>
			    <li><a href="020-grammar-language.php#parser_rules" >Parser Rules</a></li>
			    <li><a href="020-grammar-language.php#hidden_terminals" >Hidden Terminal Symbols</a></li>
			    <li><a href="020-grammar-language.php#datatypeRules" >Data Type Rules</a></li>
			    <li><a href="020-grammar-language.php#syntax_8" >Enum Rules</a></li>
			    <li><a href="020-grammar-language.php#antlr_errors" >Syntactic Predicates</a></li>
			  </ul>
			</div>
			<p>
			In the following the different concepts and syntactical constructs of the grammar language are explained. 
			</p>
			<a name="syntax_2" ></a>
			<h2>Language Declaration</h2>
			<p>
			Each Xtext grammar starts with a header that defines some properties of the grammar.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">grammar</span>&nbsp;org.xtext.example.SecretCompartments<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">with</span>&nbsp;org.eclipse.xtext.common.Terminals
					</p>
				</div>
			</div>
			</p>
			<p>
			The first line declares the name of the language. Xtext leverages Java's classpath mechanism. This means that the name 
			can be any valid Java qualifier. The file name needs to correspond to the language name and have the file 
			extension <span class="inlinecode">.xtext</span>. This means that the name has to be <em>SecretCompartments.xtext</em> and must be placed 
			in a package <em>org.xtext.example</em> on your project's classpath. In other words, your <span class="inlinecode">.xtext</span> file
			has to reside in a Java source folder to be valid.
			</p>
			<p>
			The second aspect that can be deduced from the first line of the grammar is its relationship to other
			languages. An Xtext grammar can declare another existing grammar to be reused. The mechanism is called <a href="020-grammar-language.php#grammarMixins" title="Go to &quot;Grammar Mixins&quot;">grammar mixin</a>).
			</p>
			<a name="package_declarations" ></a>
			<h2>EPackage Declarations</h2>
			<p>
			Xtext parsers create in-memory object graphs while consuming text. Such object-graphs are 
			instances of EMF Ecore models. An Ecore model basically consists of an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> containing 
			<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClasses</abbr></a>, 
			<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EDataType.html" title="org.eclipse.emf.ecore.EDataType">EDataTypes</abbr></a> and <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EEnum.html" title="org.eclipse.emf.ecore.EEnum">EEnums</abbr></a> 
			(see the <a href="210-emf-integration.php#model_metamodel" title="Go to &quot;Model, Ecore Model, and Ecore&quot;">section on EMF</a> for more details) and describes
			the structure of the instantiated objects. Xtext can infer Ecore models from a grammar 
			(see <a href="020-grammar-language.php#metamodelInference" title="Go to &quot;Ecore Model Inference&quot;">Ecore model inference</a>) but it is also 
			possible to import existing Ecore models. You can even mix both approaches and use multiple existing Ecore models and 
			infer some others from a single grammar. This allows for easy reuse of existing abstractions while still
			having the advantage of short turnarounds with derived Ecore models. 
			</p>
			<a name="package_declarations_2" ></a>
			<h3>EPackage Generation</h3>
			<p>
			The easiest way to get started is to let Xtext infer the Ecore model from your grammar. This is what is done in the 
			secret compartment example. The <span class="inlinecode"><span class="keyword">generate</span></span> declaration in the grammar advises the framework
			to do so:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">generate</span>&nbsp;secrets&nbsp;<span class="string">&apos;http://www.eclipse.org/secretcompartment&apos;</span></span>
			</p>
			<p>
			That statement could actually be read as: generate an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> with the 
			<em>name</em> <span class="inlinecode">secrets</span> and the <em>nsURI</em> 
			<span class="inlinecode"><span class="string">"http://www.eclipse.org/secretcompartment"</span></span>. 
			Actually these are the mandatory properties that are necessary to create an empty <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a>.
			Xtext will then add <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClasses</abbr></a> with 
			<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttributes</abbr></a> and <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReferences</abbr></a> for the 
			different parser
			rules in your grammar, as described in <a href="020-grammar-language.php#metamodelInference" title="Go to &quot;Ecore Model Inference&quot;">Ecore model inference</a>. 
			</p>
			<a name="package_declarations_3" ></a>
			<h3>EPackage Import</h3>
			<p>
			If you already have an existing <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a>, you can import it using its namespace URI or a resource URI. 
			An <a href="http://www.ietf.org/rfc/rfc2396.txt" >URI</a> (Uniform Resource Identifier) provides a simple and extensible 
			means for identifying an abstract or physical resource. For all the nifty details about EMF URIs 
			please refer to its <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html" title="org.eclipse.emf.common.util.URI">documentation</abbr></a>. It is strongly recommended
			to use the namespace URI instead of the resource uri because it is independent from the concrete location
			in the file system and much more portable across different machines, easier to configure in the workflow
			and works better with language mixins. The import via platform URIs or file URIs can be considered deprecated
			and is only supported for backwards compatibility reasons.
			</p>
			<a name="package_declarations_3_2" ></a>
			<h4><p>
			Using Namespace URIs to Import Existing EPackages
			</p>
			</h4>
			<p>
			You can use namespace URI in order to import existing <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a>. This is generally 
			preferrable. The package will be read from the Xtext index and therefore your grammar is independent
			from the concrete location of the respective ecore file. You have to make sure though, that the ecore file is contained
			in a project, that is managed by Xtext. Therefore the project has to have to Xtext project nature attached.
			Ecore files that reside in referenced Java archives (JARs) are automatically picked up and indexed if
			the referencing project itself is an Xtext project.
			</p>
			<p>
			To import an EPackage, you have to state its namespace URI like this:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">import</span>&nbsp;<span class="string">"http://www.xtext.org/example/Domainmodel"</span>&nbsp;<span class="keyword">as</span>&nbsp;dmodel</span>
			</p>
			<p>
			In order to be able to find the referenced package in the language generator, some configuration values
			have to be set. It is usually the easiest way to register the generated <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> 
			interface in the workflow.
			The <abbr title="org.eclipse.emf.mwe.utils.StandaloneSetup" >StandaloneSetup</abbr> offers the respective methods to achieve this.
			Simply state something like this in the workflow:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						bean&nbsp;=&nbsp;StandaloneSetup&nbsp;{<br/>
						&nbsp;&nbsp;platformUri&nbsp;=&nbsp;<span class="string">"${runtimeProject}/../.."</span><br/>
						&nbsp;&nbsp;scanClassPath&nbsp;=&nbsp;<span class="keyword">true</span><br/>
						&nbsp;&nbsp;registerGeneratedEPackage&nbsp;=&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;<span class="string">"org.eclipse.xtext.example.domainmodel.domainmodel.DomainmodelPackage"</span><br/>
						&nbsp;&nbsp;registerGenModelFile&nbsp;=&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;<span class="string">"platform:/resource/.../path/to/Domainmodel.genmodel"</span><br/>
						}
					</p>
				</div>
			</div>
			</p>
			<p>
			The registered genmodel is necessary to tell the code generator how the referenced Java classes are named.
			Please see below for alternatives that allow to register the genmodel, too. They may be handy if you
			create the genmodel in the workflow itself. 
			</p>
			<p>
			If the generated EPackage interface is not available when the language workflow is executed, you can
			use another approach to register the reference packages. This may happen if your want to generate EMF
			classes and the language infrastructure in one and the same workflow. The section in the workflow, that
			refers the your grammar, allows to set additional resources that should be loaded prior to loading the
			grammar file. The ecore files that contain the referenced EPackages are a good candidate for preloaded
			resources.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						language&nbsp;=&nbsp;{<br/>
						&nbsp;&nbsp;loadedResource&nbsp;=&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;<span class="string">"platform:/resource/.../path/to/Domainmodel.ecore"</span><br/>
						&nbsp;&nbsp;uri&nbsp;=&nbsp;grammarURI<br/>
						}
					</p>
				</div>
			</div>
			</p>
			<p>
			You can use either platform URIs or classpath URIs to list the required ecore files (see below for details
			on both URI schemes).
			</p>
			<a name="package_declarations_3_3" ></a>
			<h4><p>
			Using Resource URIs to Import Existing EPackages - Deprecated
			</p>
			</h4>
			<p>
			In order to import an existing Ecore model, you'll have to have the *.ecore file describing the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> 
			you want to 
			use somewhere in your workspace. To refer to that file you make use of the <em>platform:/resource</em> scheme.
			Platform URIs are a special EMF concept which allow to reference elements in the workspace 
			independent of the physical location of the workspace. It is an abstraction that uses the Eclipse workspace
			concept as the logical root of each project. 
			</p>
			<p>
			An import statement referring to an Ecore file by a <em>platform:/resource/</em>-URI looks like this: 
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">import</span>&nbsp;<span class="string">&apos;platform:/resource/my.project/model/SecretCompartments.ecore&apos;</span></span>
			</p>
			<p>
			If you want to mix generated and imported Ecore models you'll have to configure the generator fragment 
			in your MWE file responsible for <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.0.0/org/eclipse/xtext/generator/ecore/EcoreGeneratorFragment.html" title="org.eclipse.xtext.generator.ecore.EcoreGeneratorFragment">generating the Ecore classes</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/tree/v2.1.0/plugins/org.eclipse.xtext.generator/src/org/eclipse/xtext/generator/ecore/EcoreGeneratorFragment.java" title="View Source Code" >(src)</a> 
			with resource URIs that point to the <a href="210-emf-integration.php#emf_codegen" title="Go to &quot;EMF Code Generation&quot;">generator models</a> of the referenced Ecore models.
			</p>
			<p>
			The <em>*.genmodel</em> provides all kind of generator configuration used by EMF's code generator. Xtext will automatically create
			a generator model for derived <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackages</abbr></a>, but if it references an existing, imported Ecore
			model, the code generator needs to know how that code was generated in order to generate valid Java code. 
			</p>
			<p>
			Example:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						fragment&nbsp;=&nbsp;org.eclipse.xtext.generator.ecore.EcoreGeneratorFragment&nbsp;{<br/>
						&nbsp;&nbsp;referencedGenModels&nbsp;=<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"platform:/resource/my.project/model/SecretCompartments.genmodel"</span><br/>
						}
					</p>
				</div>
			</div>
			</p>
			<a name="package_declarations_3_4" ></a>
			<h4><p>
			Using Classpath URIs to Import Existing EPackages - Deprecated
			</p>
			</h4>
			<p>
			We usually like to leverage Java's classpath mechanism, because is is well understood and can be configured easily
			with Eclipse. Furthermore it allows us to package libraries as jars. If you want to reference an existing
			<em>*.ecore</em> file which is contained in a jar, you can make use of the 
			classpath URI scheme we've introduced. For instance if you want to reference Java elements, you can use the JvmType Ecore model 
			which is shipped as part of Xtext. 
			</p>
			<p>
			Example:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">import</span>&nbsp;<span class="string">&apos;classpath:/model/JvmTypes.ecore&apos;</span>&nbsp;<span class="keyword">as</span>&nbsp;types</span>
			</p>
			<p>
			As with platform resource URIs you'll also have to tell the generator where the corresponding <em>*.genmodel</em> can be found:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						fragment&nbsp;=&nbsp;org.eclipse.xtext.generator.ecore.EcoreGeneratorFragment&nbsp;{<br/>
						&nbsp;&nbsp;referencedGenModels&nbsp;=<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"classpath:/model/JvmTypes.genmodel"</span><br/>
						}
					</p>
				</div>
			</div>
			</p>
			<p>
			See the section on <a href="199a-jvmtypes.php" title="Go to &quot;Referring to Java Elements using JVM Types&quot;">Referring Java Types</a> for a full explanation of this useful feature.
			</p>
			<a name="package_declarations_4" ></a>
			<h3>Ecore Model Aliases for EPackages</h3>
			<p>
			If you want to use multiple <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackages</abbr></a> you need to specify aliases in the following way:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">generate</span>&nbsp;secrets&nbsp;<span class="string">&apos;http://www.eclipse.org/secretcompartment&apos;</span><br/>
						<span class="keyword">import</span>&nbsp;<span class="string">&apos;http://www.eclipse.org/anotherPackage&apos;</span>&nbsp;<span class="keyword">as</span>&nbsp;another
					</p>
				</div>
			</div>
			</p>
			<p>
			When referring to a type somewhere in the grammar you need to qualify the reference using that 
			alias (example <span class="inlinecode">another::SomeType</span>). We'll see later where such type references occur.
			</p>
			<p>
			It is also supported to put multiple <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> imports into one alias. This is no problem as 
			long as there are not any two <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClassifier.html" title="org.eclipse.emf.ecore.EClassifier">EClassifiers</abbr></a> with the same name. 
			In that case none of them can be referenced. 
			It is even possible to <span class="inlinecode"><span class="keyword">import</span></span> multiple and <span class="inlinecode"><span class="keyword">generate</span></span> one Ecore model and declare all of them with 
			same alias. If you do so, for a reference to an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClassifier.html" title="org.eclipse.emf.ecore.EClassifier">EClassifier</abbr></a> first the imported <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackages</abbr></a> are 
			scanned before it is assumed that a type needs to be generated into the inferred package. 
			</p>
			<p>
			Note, that using this feature is not recommended, because it might cause problems, which are hard to track down.
			For instance, a reference to <em>classA</em> would as well be linked to a newly created <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a>, because the 
			corresponding type in <em>http://www.eclipse.org/packContainingClassA</em> is spelled with a capital letter.
			</p>
			<a name="syntax_4" ></a>
			<h2>Rules</h2>
			<p>
			Basically parsing can be separated in the following phases. 
			</p>
			<p>
			<ol>
			  <li>Lexing</li>
			  <li>Parsing</li>
			  <li>Linking</li>
			  <li>Validation</li>
			</ol>
			</p>
			<a name="syntax_4_3" ></a>
			<h3>Terminal Rules</h3>
			<p>
			In the first stage called <em>lexing</em>, a sequence of characters (the text input) is transformed into a sequence of so 
			called tokens. In this context, a token is sort of a strongly typed part or region of the input sequence. It consists of one 
			or more characters and was matched by a particular terminal rule or keyword and therefore represents an atomic symbol.
			Terminal rules are also referred to as <em>token rules</em> or <em>lexer rules</em>. There is an informal naming convention that 
			names of terminal rules are all upper-case.
			</p>
			<p>
			In the secret compartments example there are no explicitly defined terminal rules, since it only uses the <em>ID</em> rule 
			which is inherited from the grammar <span class="inlinecode">org.eclipse.xtext.common.Terminals</span> (cf. <a href="020-grammar-language.php#grammarMixins" title="Go to &quot;Grammar Mixins&quot;">Grammar Mixins</a>).
			Therein the <em>ID</em> rule is defined as follows:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">terminal</span>&nbsp;ID&nbsp;:&nbsp;<br/>
						&nbsp;&nbsp;(<span class="string">&apos;^&apos;</span>)?(<span class="string">&apos;a&apos;</span>..<span class="string">&apos;z&apos;</span>|<span class="string">&apos;A&apos;</span>..<span class="string">&apos;Z&apos;</span>|<span class="string">&apos;_&apos;</span>)&nbsp;(<span class="string">&apos;a&apos;</span>..<span class="string">&apos;z&apos;</span>|<span class="string">&apos;A&apos;</span>..<span class="string">&apos;Z&apos;</span>|<span class="string">&apos;_&apos;</span>|<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>)*;
					</p>
				</div>
			</div>
			</p>
			<p>
			It says that a token <em>ID</em> starts with an optional <em>'^'</em> character (caret), followed by a letter <span class="inlinecode">(<span class="string">&apos;a&apos;</span>..<span class="string">&apos;z&apos;</span>|<span class="string">&apos;A&apos;</span>..<span class="string">&apos;Z&apos;</span>)</span> 
			or underscore <span class="inlinecode"><span class="string">&apos;_&apos;</span></span> followed by any number of letters, underscores and numbers <span class="inlinecode">(<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>)</span>. 
			</p>
			<p>
			The caret is used to escape an identifier if there are conflicts with existing keywords. It is removed 
			by the <em>ID</em> rule's <a href="090-valueconverter.php" title="Go to &quot;Value Converter&quot;">ValueConverter</a>. 
			</p>
			<p>
			This is the simplified formal definition of terminal rules:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						TerminalRule&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">&apos;terminal&apos;</span>&nbsp;name=ID&nbsp;(<span class="string">&apos;returns&apos;</span>&nbsp;type=TypeRef)?&nbsp;<span class="string">&apos;:&apos;</span>&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;alternatives=TerminalAlternatives&nbsp;<span class="string">&apos;;&apos;</span><br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			Note, that <em>the order of terminal rules is crucial for your grammar</em>, as they may shadow each other. 
			This is especially important for newly introduced rules in connection with imported rules from used grammars. 
			</p>
			<p>
			It's almost in any case recommended to use data type rules instead. Let's assume you want to add a rule
			 to allow fully qualified names in addition to simple IDs. Since a qualified name with only one segment
			 looks like a plain ID, you should implement it as a <a href="020-grammar-language.php#datatypeRules" title="Go to &quot;Data Type Rules&quot;">data type rule</a>, instead of adding 
			 another terminal rule. The same rule of thumb applies to floating point literals, too.
			</p>
			<a name="syntax_4_3_10" ></a>
			<h4><p>
			Return Types
			</p>
			</h4>
			<p>
			Each terminal rule returns an atomic value (an <span class="inlinecode">Ecore&nbsp;EDataType</span>). By default, it's assumed that
			an instance of <span class="inlinecode">ecore::EString</span>) should be returned.
			However, if you want to provide a different type you can specify it. For instance, the rule <em>INT</em> is defined as:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">terminal</span>&nbsp;INT&nbsp;<span class="keyword">returns</span>&nbsp;ecore::EInt&nbsp;:&nbsp;<br/>
						&nbsp;&nbsp;(<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>)+;
					</p>
				</div>
			</div>
			</p>
			<p>
			This means that the terminal rule <em>INT</em> returns instances of <span class="inlinecode">ecore::EInt</span>. It is possible to define any 
			kind of data type here, which just needs to be an instance of <span class="inlinecode">ecore::EDataType</span>. In order to tell the framework 
			how to convert the parsed string to a value of the declared data type, you need to provide your own 
			implementation of <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.0.0/org/eclipse/xtext/conversion/IValueConverterService.html" title="org.eclipse.xtext.conversion.IValueConverterService">IValueConverterService</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/tree/v2.1.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverterService.java" title="View Source Code" >(src)</a> (cf. 
			<a href="090-valueconverter.php" title="Go to &quot;Value Converter&quot;">value converters</a>). The value converter is also the service that allows to remove escape
			sequences or semantically unnecessary character like quotes from string literals or the caret <span class="inlinecode"><span class="string">&apos;^&apos;</span></span> from identifiers.
			 Its implementation needs to be registered as a service (cf. <a href="040-dependency-injection.php" title="Go to &quot;Dependency Injection in Xtext with Google Guice&quot;">Service Framework</a>).
			</p>
			<a name="syntax_4_4" ></a>
			<h3>Extended Backus-Naur Form Expressions</h3>
			<p>
			Terminal rules are described using <em>Extended Backus-Naur Form</em>-like (EBNF) expressions. The different expressions 
			are described in the following. Each of these expressions allows to define a cardinality.
			There are four different possible cardinalities:
			</p>
			<p>
			<ol>
			  <li>exactly one (the default, no operator)</li>
			  <li>one or none (operator <em>?</em>)</li>
			  <li>any (zero or more, operator <em>*</em>)</li>
			  <li>one or more (operator <em>+</em>)</li>
			</ol>
			</p>
			<a name="Keywords" ></a>
			<h4><p>
			Keywords / Characters
			</p>
			</h4>
			<p>
			Keywords are a kind of terminal rule literals. 
			The <em>ID</em> rule in <span class="inlinecode">org.eclipse.xtext.common.Terminals</span> for instance starts with a keyword:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;ID&nbsp;:&nbsp;<span class="string">&apos;^&apos;</span>?&nbsp;....&nbsp;;</span>
			</p>
			<p>
			The question mark sets the cardinality to <em>none or one</em> (i.e. optional) like explained above.
			</p>
			<p>
			Note that a keyword can have any length and contain arbitrary characters. 
			</p>
			<p>
			The following standard Java notations for special characters are allowed: <em>\n</em>, <em>\r</em>,
			 <em>\t</em>, <em>\b</em>, <em>\f</em> and the quoted unicode character notation, such as <em>\u123</em>.
			</p>
			<a name="syntax_4_4_4" ></a>
			<h4><p>
			Character Ranges
			</p>
			</h4>
			<p>
			A character range can be declared using the <span class="inlinecode">..</span> operator.
			</p>
			<p>
			Example:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;INT&nbsp;<span class="keyword">returns</span>&nbsp;ecore::EInt:&nbsp;(<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>)+;</span>
			</p>
			<p>
			In this case an <em>INT</em> is comprised of one or more (note the <span class="inlinecode">+</span> operator) characters 
			between (and including) <span class="inlinecode"><span class="string">&apos;0&apos;</span></span> and <span class="inlinecode"><span class="string">&apos;9&apos;</span></span>.
			</p>
			<a name="syntax_4_4_5" ></a>
			<h4><p>
			Wildcard
			</p>
			</h4>
			<p>
			If you want to allow any character you can simple write the wildcard operator <span class="inlinecode">.</span> (dot):
			Example:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;FOO&nbsp;:&nbsp;<span class="string">&apos;f&apos;</span>&nbsp;.&nbsp;<span class="string">&apos;o&apos;</span>;</span>
			</p>
			<p>
			The rule above would allow expressions like <em>foo</em>, <em>f0o</em> or even <em>f_o</em>.
			</p>
			<a name="syntax_4_4_6" ></a>
			<h4><p>
			Until Token
			</p>
			</h4>
			<p>
			With the until token it is possible to state that everything should be consumed until a certain token occurs.
			The multi-line comment is implemented this way:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;ML_COMMENT&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span class="string">&apos;/*&apos;</span>&nbsp;-&gt;&nbsp;<span class="string">&apos;*/&apos;</span>;</span>
			</p>
			<p>
			This is the rule for Java-style comments that begin with <span class="inlinecode">/*</span> and end with <span class="inlinecode">*/</span>.
			</p>
			<a name="syntax_4_4_7" ></a>
			<h4><p>
			Negated Token
			</p>
			</h4>
			<p>
			All the tokens explained above can be inverted using a preceding exclamation mark:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;BETWEEN_HASHES&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span class="string">&apos;#&apos;</span>&nbsp;(!<span class="string">&apos;#&apos;</span>)*&nbsp;<span class="string">&apos;#&apos;</span>;</span>
			</p>
			<a name="rule_calls" ></a>
			<h4><p>
			Rule Calls
			</p>
			</h4>
			<p>
			Rules can refer to other rules. This is simply done by using the name of the rule to be called.
			We refer to this as rule calls. Rule calls in terminal rules can only point to terminal rules.
			</p>
			<p>
			Example:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;DOUBLE&nbsp;:&nbsp;INT&nbsp;<span class="string">&apos;.&apos;</span>&nbsp;INT;</span>
			</p>
			<p>
			<em>Note: It is generally not a good idea to implement floating point literals with terminal rules. You
			should use data type rules instead for the above mentioned reasons.</em>
			</p>
			<a name="Alternatives" ></a>
			<h4><p>
			Alternatives
			</p>
			</h4>
			<p>
			Alternatives allow to define multiple valid options in the input file. 
			For instance, the white space rule uses alternatives like this:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;WS&nbsp;:&nbsp;(<span class="string">&apos;&nbsp;&apos;</span>|<span class="string">&apos;\t&apos;</span>|<span class="string">&apos;\r&apos;</span>|<span class="string">&apos;\n&apos;</span>)+;</span>
			</p>
			<p>
			That is a WS can be made of one or more white space characters (including <span class="inlinecode"><span class="string">&apos;&nbsp;&apos;</span>,&nbsp;<span class="string">&apos;\t&apos;</span>,&nbsp;<span class="string">&apos;\r&apos;</span>,&nbsp;<span class="string">&apos;\n&apos;</span></span>).
			</p>
			<a name="Groups" ></a>
			<h4><p>
			Groups
			</p>
			</h4>
			<p>
			Finally, if you put tokens one after another, the whole sequence is referred to as a group.
			Example:
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;ASCII&nbsp;:&nbsp;<span class="string">&apos;0x&apos;</span>&nbsp;(<span class="string">&apos;0&apos;</span>..<span class="string">&apos;7&apos;</span>)&nbsp;(<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>|<span class="string">&apos;A&apos;</span>..<span class="string">&apos;F&apos;</span>);</span>
			</p>
			<p>
			That is the 2-digit hexadecimal code of ASCII characters.
			</p>
			<a name="terminal_fragment" ></a>
			<h3>Terminal Fragments</h3>
			<p>
			Since terminal rules are used in an unscoped context, it's not easily possible to reuse parts of their
			definition. Fragments solve this problem. They allow the same EBNF elements as terminal rules do but
			may not be consumed by the lexer. Instead, they have to be used by other terminal rules. This allows
			to extract repeating parts of a definition:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">terminal</span>&nbsp;<span class="keyword">fragment</span>&nbsp;ESCAPED_CHAR&nbsp;:&nbsp;<span class="string">&apos;\\&apos;</span>&nbsp;(<span class="string">&apos;n&apos;</span>|<span class="string">&apos;t&apos;</span>|<span class="string">&apos;r&apos;</span>|<span class="string">&apos;\\&apos;</span>);<br/>
						<span class="keyword">terminal</span>&nbsp;STRING&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">&apos;"&apos;</span>&nbsp;(&nbsp;ESCAPED_CHAR&nbsp;|&nbsp;!(<span class="string">&apos;\\&apos;</span>|<span class="string">&apos;"&apos;</span>)&nbsp;)*&nbsp;<span class="string">&apos;"&apos;</span>&nbsp;|<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"&apos;"</span>&nbsp;(&nbsp;ESCAPED_CHAR&nbsp;|&nbsp;!(<span class="string">&apos;\\&apos;</span>|<span class="string">"&apos;"</span>)&nbsp;)*&nbsp;<span class="string">"&apos;"</span><br/>
						;
					</p>
				</div>
			</div>
			</p>
			<a name="eof" ></a>
			<h3>EOF - End Of File</h3>
			<p>
			The EOF (End Of File) token may be used to describe that the end of the input stream is a valid situation
			at a certain point in a terminal rule. This allows to consume the complete remaining input of a file
			starting with a special delimiter.
			</p>
			<p>
			<span class="inlinecode"><span class="keyword">terminal</span>&nbsp;UNCLOSED_COMMENT&nbsp;:&nbsp;<span class="string">&apos;/*&apos;</span>&nbsp;(!<span class="keyword">EOF</span>)*&nbsp;<span class="keyword">EOF</span>;</span>
			</p>
			<a name="parser_rules" ></a>
			<h2>Parser Rules</h2>
			<p>
			The parser is fed with a sequence of terminals and walks through the so called parser rules. Hence a parser rule - 
			contrary to a terminal rule - does not produce a single atomic terminal token but a tree of non-terminal 
			and terminal tokens. They lead to a so called <a href="016-working-with-Xtext-models.php#node_model" title="Go to &quot;Working with the Node Model&quot;">parse tree</a> (in Xtext it is also referred 
			as node model). Furthermore, parser rules are handled as kind of a building plan for the creation of 
			the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObjects</abbr></a> that form the semantic model (the linked abstract syntax graph or AST). Due to this 
			fact, parser rules are even called production or EObject rules. Different constructs like actions and 
			assignments are used to derive types and initialize the semantic objects accordingly. 
			</p>
			<a name="parser_rules_2" ></a>
			<h3>Extended Backus-Naur Form Expressions</h3>
			<p>
			Not all the expressions that are available in terminal rules can be used in parser rules. Character 
			ranges, wildcards, the until token and the negation as well as the EOF token are only available for terminal rules. 
			</p>
			<p>
			The elements that are available in parser rules as well as in terminal rules are
			</p>
			<p>
			<ol>
			  <li><a href="020-grammar-language.php#Groups" title="Go to &quot;Groups&quot;">Groups</a>, </li>
			  <li><a href="020-grammar-language.php#Alternatives" title="Go to &quot;Alternatives&quot;">Alternatives</a>, </li>
			  <li><a href="020-grammar-language.php#Keywords" title="Go to &quot;Keywords / Characters&quot;">Keywords</a> and </li>
			  <li><a href="020-grammar-language.php#rule_calls" title="Go to &quot;Rule Calls&quot;">Rule Calls</a>.</li>
			</ol>
			</p>
			<p>
			In addition to these elements, there are some expressions used to direct how the AST 
			is constructed. They are listed and explained in the following.
			</p>
			<a name="assignments" ></a>
			<h4><p>
			Assignments
			</p>
			</h4>
			<p>
			Assignments are used to assign the consumed information to a feature of the currently produced object. 
			The type of the current object, its <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a>, is specified by the return type of the parser 
			rule. If it is not explicitly stated it is implied that the type's name equals the rule's name. 
			The type of the assigned feature is inferred from the right hand side of the assignment.
			</p>
			<p>
			Example:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						State&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">&apos;state&apos;</span>&nbsp;name=ID<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;(<span class="string">&apos;actions&apos;</span>&nbsp;<span class="string">&apos;{&apos;</span>&nbsp;(actions+=[Command])+&nbsp;<span class="string">&apos;}&apos;</span>)?<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;(transitions+=Transition)*<br/>
						&nbsp;&nbsp;<span class="string">&apos;end&apos;</span><br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			The syntactic declaration for states in the state machine example starts with a keyword <span class="inlinecode"><span class="keyword">state</span></span> followed by an assignment:
			</p>
			<p>
			<span class="inlinecode">name=ID</span>
			</p>
			<p>
			The left hand side refers to a feature <em>name</em> of the current object (which has the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> <em>State</em> in this case). 
			The right hand side can be a rule call, a keyword, a <a href="020-grammar-language.php#cross_reference" title="Go to &quot;Cross-References&quot;">cross-reference</a> or an alternative
			comprised by the former. The type of the feature 
			needs to be compatible with the type of the expression on the right. As <em>ID</em> returns an <em>EString</em> in this case, 
			the feature <em>name</em> needs to be of type <a class="jdoc" href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="java.lang.String">EString</abbr></a> as well.
			</p>
			<p>
			<em>Assignment Operators</em>
			</p>
			<p>
			There are three different assignment operators, each with different semantics.
			</p>
			<p>
			<ol>
			  <li>The simple equal sign <span class="inlinecode">=</span> is the straight forward assignment, and used for features which take only one element.</li>
			  <li>The <span class="inlinecode">+=</span> sign (the add operator) expects a multi-valued feature and adds the value on the right hand to that feature, which is a list feature.</li>
			  <li>The <span class="inlinecode">?=</span> sign (boolean assignment operator) expects a feature of type <a class="jdoc" href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html" title="java.lang.Boolean">EBoolean</abbr></a> and sets it 
			  to true if the right hand side was consumed independently from the concrete value of the right hand side.</li>
			</ol>
			</p>
			<p>
			The used assignment operator does not influence the cardinality of the expected symbols on the right hand side. 
			</p>
			<a name="cross_reference" ></a>
			<h4><p>
			Cross-References
			</p>
			</h4>
			<p>
			A unique feature of Xtext is the ability to declare crosslinks in the grammar. In traditional compiler 
			construction the crosslinks are not established during parsing but in a later linking phase. This is the 
			same in Xtext, but we allow to specify crosslink information in the grammar. This information is used by the linker.
			The syntax for crosslinks is:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						CrossReference&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">&apos;[&apos;</span>&nbsp;type=TypeRef&nbsp;(<span class="string">&apos;|&apos;</span>&nbsp;^terminal=CrossReferenceableTerminal&nbsp;)?&nbsp;<span class="string">&apos;]&apos;</span><br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			For example, the transition is made up of two cross-references, pointing to an event and a state:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Transition&nbsp;:<br/>
						&nbsp;&nbsp;event=[Event]&nbsp;<span class="string">&apos;=&gt;&apos;</span>&nbsp;state=[State]<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			It is important to understand that the text between the square brackets does not refer to another rule, but to an
			<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> - which is a type and not a parser rule!
			This is sometimes confusing, because one usually uses the same name for the rules and the returned types.
			That is if we had named the type for events differently like in the following the cross-reference needs 
			to be adapted as well:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Transition&nbsp;:<br/>
						&nbsp;&nbsp;event=[MyEvent]&nbsp;<span class="string">&apos;=&gt;&apos;</span>&nbsp;state=[State]<br/>
						;<br/>
						&nbsp;<br/>
						Event&nbsp;<span class="keyword">returns</span>&nbsp;MyEvent&nbsp;:&nbsp;....;
					</p>
				</div>
			</div>
			</p>
			<p>
			Looking at the syntax definition for cross-references, there is an optional part starting with a vertical 
			bar (pipe) followed by <em>CrossReferenceableTerminal</em>. This is the part describing the concrete text, from 
			which the crosslink later should be established. If the terminal is omitted, it is expected to be the rule
			with the name <em>ID</em> - if one can be found. The terminal is mandatory for languages that do not define a rule with the name <em>ID</em>.
			</p>
			<p>
			Have a look at the <a href="070-linking.php" title="Go to &quot;Linking&quot;">linking section</a> in order to understand how linking is done.
			</p>
			<a name="unordered_groups" ></a>
			<h4><p>
			Unordered Groups
			</p>
			</h4>
			<p>
			The elements of an unordered group can occur in any order but each element must appear once. Unordered 
			groups are separated by <span class="inlinecode">&amp;</span>. The following rule <span class="inlinecode">Modifier</span> allows to parse simplified
			modifiers of the Java language:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Modifier:&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;static?=<span class="string">&apos;static&apos;</span>?&nbsp;&amp;&nbsp;final?=<span class="string">&apos;final&apos;</span>?&nbsp;&amp;&nbsp;visibility=Visibility;<br/>
						<br/>
						<span class="keyword">enum</span>&nbsp;Visibility:<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;PUBLIC=<span class="string">&apos;public&apos;</span>&nbsp;|&nbsp;PRIVATE=<span class="string">&apos;private&apos;</span>&nbsp;|&nbsp;PROTECTED=<span class="string">&apos;protected&apos;</span>;
					</p>
				</div>
			</div>
			</p>
			<p>
			Therefore, the following sequences of tokens are valid:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">public</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">final</span><br/>
						<span class="keyword">static</span>&nbsp;<span class="keyword">protected</span>&nbsp;<br/>
						<span class="keyword">final</span>&nbsp;<span class="keyword">private</span>&nbsp;<span class="keyword">static</span><br/>
						<span class="keyword">public</span>
					</p>
				</div>
			</div>
			</p>
			<p>
			However, since no unordered groups are used in the rule <span class="inlinecode">Modifier</span>, the parser refuses to accept
			this input lines:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">static</span>&nbsp;<span class="keyword">final</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="comment">//&nbsp;ERROR:&nbsp;static&nbsp;appears&nbsp;twice<br/>
						</span><span class="keyword">public</span>&nbsp;<span class="keyword">static</span>&nbsp;<span class="keyword">final</span>&nbsp;<span class="keyword">private</span>&nbsp;<span class="comment">//&nbsp;ERROR:&nbsp;visibility&nbsp;appears&nbsp;twice<br/>
						</span><span class="keyword">final</span>&nbsp;<span class="comment">//&nbsp;ERROR:&nbsp;visibility&nbsp;is&nbsp;missing</span>
					</p>
				</div>
			</div>
			</p>
			<p>
			Note that if you want an element of an unordered group to appear once or not at all, 
			you have to choose a cardinality of <span class="inlinecode">?</span>. In the example, the visibility is mandatory, 
			while <span class="inlinecode"><span class="keyword">static</span></span> or <span class="inlinecode"><span class="keyword">final</span></span> are optional. Elements with a cardinality of <span class="inlinecode">*</span> or <span class="inlinecode">+</span>
			have to appear continuously without interruption, i.e.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Rule:<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;values+=INT*&nbsp;&amp;&nbsp;name=ID;
					</p>
				</div>
			</div>
			</p>
			<p>
			will parse these lines
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						0&nbsp;8&nbsp;15&nbsp;x<br/>
						x&nbsp;0&nbsp;8&nbsp;15
					</p>
				</div>
			</div>
			</p>
			<p>
			but not does not consume the following sequence without raising an error
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						0&nbsp;x&nbsp;8&nbsp;15&nbsp;<span class="comment">//&nbsp;wrong,&nbsp;as&nbsp;values&nbsp;may&nbsp;be&nbsp;interrupted&nbsp;by&nbsp;a&nbsp;name&nbsp;(ID)</span>
					</p>
				</div>
			</div>
			</p>
			<a name="parser_rules_2_8" ></a>
			<h4><p>
			Simple Actions
			</p>
			</h4>
			<p>
			The object to be returned by a parser rule is usually created lazily on the first assignment. Its type is determined from the specified return type
			of the rule which may have been inferred from the rule's name if no explicit return type is specified.
			</p>
			<p>
			With Actions however, the creation of returned <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> can be made explicit. Xtext supports two kinds of Actions:
			</p>
			<p>
			<ol>
			  <li><em>Simple</em> Actions, and</li>
			  <li><em>Assigned</em> Actions.</li>
			</ol>
			</p>
			<p>
			If you want to enforce the creation of an instance with specific type you can use simple actions.
			In the following example <em>TypeB</em> must be a subtype of <em>TypeA</em>. An expression <em>A ident</em> should create an instance of 
			<em>TypeA</em>, whereas <em>B ident</em> should instantiate <em>TypeB</em>.
			</p>
			<p>
			If you don't use actions, you'll have to define an alternative and delegate rules to guide the parser
			to the right types for the to-be-instantiated objects:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						MyRule&nbsp;<span class="keyword">returns</span>&nbsp;TypeA&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">"A"</span>&nbsp;name=ID&nbsp;|<br/>
						&nbsp;&nbsp;MyOtherRule<br/>
						;&nbsp;<br/>
						&nbsp;<br/>
						MyOtherRule&nbsp;<span class="keyword">returns</span>&nbsp;TypeB&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">"B"</span>&nbsp;name&nbsp;=&nbsp;ID<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			Actions however allow to make this explicit. Thereby they can improve the readability of grammars. 
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						MyRule&nbsp;<span class="keyword">returns</span>&nbsp;TypeA&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">"A"</span>&nbsp;name=ID&nbsp;|<br/>
						&nbsp;&nbsp;<span class="string">"B"</span>&nbsp;{TypeB}&nbsp;name=ID<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			Generally speaking, the instance is created as soon as the parser hits the first assignment. However, actions 
			allow to explicitly instantiate any <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObject</abbr></a>. The notation <em>{TypeB}</em> will create an instance of TypeB and assign 
			it to the result of the parser rule. This allows to define parser rules without any assignment and to
			create objects without the need to introduce unnecessary delegate rules.
			</p>
			<p>
			<em>Note: If a parser rule does not instantiate any object because it does not contain an Action and
			no mandatory Assignment, you'll likely end up with unexpected situations for valid input files. Xtext
			detects this situation and will raise a warning for the parser rules in question.</em> 
			</p>
			<a name="parser_rules_2_9" ></a>
			<h4><p>
			Unassigned Rule Calls
			</p>
			</h4>
			<p>
			We previously explained, that the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> to be returned is created lazily when the first assignment occurs or 
			as soon as a simple action is evaluated. There is another to <em>find</em> the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> to be returned. The
			concept is called <em>Unassigned Rule Call</em>.
			</p>
			<p>
			Unassigned rule calls (the name suggests it) are rule calls to other parser rules, which are not used within an 
			assignment. The return value of the called rule becomes the return value of the calling parser rule if
			it is not assigned to a feature. 
			</p>
			<p>
			With unassigned rule calls one can, for instance, create rules which just dispatch to other rules:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						AbstractToken&nbsp;:<br/>
						&nbsp;&nbsp;TokenA&nbsp;|<br/>
						&nbsp;&nbsp;TokenB&nbsp;|<br/>
						&nbsp;&nbsp;TokenC<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			As <span class="inlinecode">AbstractToken</span> could possibly return an instance of <em>TokenA</em>, <em>TokenB</em> or <em>TokenC</em> its type must be a 
			super type for all these types. Since the return value of the called rule becomes the result of the current
			rule, it is possible to further change the state of the AST 
			element by assigning additional features.
			</p>
			<p>
			Example:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						AbstractToken&nbsp;:<br/>
						&nbsp;&nbsp;(&nbsp;TokenA&nbsp;|<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;TokenB&nbsp;|<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;TokenC&nbsp;)&nbsp;(cardinality=(<span class="string">&apos;?&apos;</span>|<span class="string">&apos;+&apos;</span>|<span class="string">&apos;*&apos;</span>))?<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			This way the <em>cardinality</em> is optional (last question mark) and can be represented 
			by a question mark, a plus, or an asterisk. It will be assigned to either an 
			instance of type <em>TokenA</em>,  <em>TokenB</em>, or <em>TokenC</em> which are all subtypes of 
			<em>AbstractToken</em>. The rule in this example will never create an instance of <em>AbstractToken</em> directly
			but always return the instance that has been created by the invoked <em>TokenX</em> rule.
			</p>
			<a name="grammarActions" ></a>
			<h4><p>
			Assigned Actions
			</p>
			</h4>
			<p>
			
			Xtext leverages the powerful ANTLR parser which implements an <span class="inlinecode">LL(*)</span> algorithm. Even though <span class="inlinecode">LL</span>
			parsers have many advantages with respect to readability, debuggability and error recovery, there are
			also some drawbacks. The most important one is that it does not allow left recursive grammars.
			For instance, the following rule is not allowed in LL-based grammars, because <span class="inlinecode">Expression&nbsp;<span class="string">&apos;+&apos;</span>&nbsp;Expression</span> is left recursive:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Expression&nbsp;:<br/>
						&nbsp;&nbsp;Expression&nbsp;<span class="string">&apos;+&apos;</span>&nbsp;Expression&nbsp;|<br/>
						&nbsp;&nbsp;<span class="string">&apos;(&apos;</span>&nbsp;Expression&nbsp;<span class="string">&apos;)&apos;</span>&nbsp;|<br/>
						&nbsp;&nbsp;INT<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			Instead one has to rewrite such things by &quot;left-factoring&quot; it:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Expression&nbsp;:<br/>
						&nbsp;&nbsp;TerminalExpression&nbsp;(<span class="string">&apos;+&apos;</span>&nbsp;TerminalExpression)?<br/>
						;<br/>
						&nbsp;<br/>
						TerminalExpression&nbsp;:<br/>
						&nbsp;&nbsp;<span class="string">&apos;(&apos;</span>&nbsp;Expression&nbsp;<span class="string">&apos;)&apos;</span>&nbsp;|<br/>
						&nbsp;&nbsp;INT<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			In practice this is always the same pattern and therefore not too difficult. 
			However, by simply applying the Xtext AST construction features we've covered so far, a grammar ...
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Expression&nbsp;:<br/>
						&nbsp;&nbsp;{Operation}&nbsp;left=TerminalExpression&nbsp;(op=<span class="string">&apos;+&apos;</span>&nbsp;right=TerminalExpression)?<br/>
						;<br/>
						&nbsp;<br/>
						TerminalExpression&nbsp;<span class="keyword">returns</span>&nbsp;Expression:<br/>
						&nbsp;&nbsp;<span class="string">&apos;(&apos;</span>&nbsp;Expression&nbsp;<span class="string">&apos;)&apos;</span>&nbsp;|<br/>
						&nbsp;&nbsp;{IntLiteral}&nbsp;value=INT<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			... would result in unwanted elements in the AST.
			For instance the expression <span class="inlinecode">(42)</span> would result in a tree like this:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Operation&nbsp;{<br/>
						&nbsp;&nbsp;left=Operation&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;left=IntLiteral&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value=42<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
						&nbsp;&nbsp;}<br/>
						}
					</p>
				</div>
			</div>
			</p>
			<p>
			Typically one would only want to have one instance of <em>IntLiteral</em> instead.
			</p>
			<p>
			This problem can be solved by using a combination of unassigned rule calls and assigned actions:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Expression&nbsp;:<br/>
						&nbsp;&nbsp;TerminalExpression&nbsp;({Operation.left=<span class="keyword">current</span>}&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;op=<span class="string">&apos;+&apos;</span>&nbsp;right=Expression)?<br/>
						;<br/>
						&nbsp;<br/>
						TerminalExpression&nbsp;<span class="keyword">returns</span>&nbsp;Expression:<br/>
						&nbsp;&nbsp;<span class="string">&apos;(&apos;</span>&nbsp;Expression&nbsp;<span class="string">&apos;)&apos;</span>&nbsp;|<br/>
						&nbsp;&nbsp;{IntLiteral}&nbsp;value=INT<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			In the example above <span class="inlinecode">{Operation.left=<span class="keyword">current</span>}</span> is a so called tree rewrite action, which creates a new instance of the stated 
			<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a>
			<em>Operation</em> and assigns the element currently to-be-returned (the <span class="inlinecode"><span class="keyword">current</span></span> variable) to a feature of the newly created object.
			The example uses the feature <em>left</em> of the <em>Operation</em> instance to store the previously returned <em>Expression</em>.
			In Java these semantics could be expressed as:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Operation&nbsp;temp&nbsp;=&nbsp;<span class="keyword">new</span>&nbsp;Operation();<br/>
						temp.setLeft(current);<br/>
						current&nbsp;=&nbsp;temp;
					</p>
				</div>
			</div>
			</p>
			<a name="hidden_terminals" ></a>
			<h2>Hidden Terminal Symbols</h2>
			<p>
			Because parser rules describe not a single token, but a sequence of patterns in the input, it is necessary to define
			the interesting parts of the input. Xtext introduces the concept of hidden tokens to handle semantically unimportant
			things like white spaces, comments, etc. in the input sequence gracefully. It is possible to define a set of terminal 
			symbols, that are hidden from the parser rules and automatically skipped when they are recognized. Nevertheless, they 
			are transparently woven into the node model, but not relevant for the semantic model. 
			</p>
			<p>
			Hidden terminals may optionally appear between any other terminals in any cardinality. They can be described per rule 
			or for the whole grammar. When <a href="020-grammar-language.php#grammarMixins" title="Go to &quot;Grammar Mixins&quot;">reusing a single grammar</a> its definition of hidden tokens is reused,
			too. The grammar <span class="inlinecode">org.eclipse.xtext.common.Terminals</span> comes with a reasonable default and hides all comments and white
			space from the parser rules.
			</p>
			<p>
			If a rule defines hidden symbols, you can think of a kind of scope that is automatically introduced. Any rule that is
			 called transitively by the declaring rule uses the same hidden terminals as the calling rule, unless it defines hidden tokens itself.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Person&nbsp;<span class="keyword">hidden</span>(WS,&nbsp;ML_COMMENT,&nbsp;SL_COMMENT):&nbsp;<br/>
						&nbsp;&nbsp;name=Fullname&nbsp;age=INT&nbsp;<span class="string">&apos;;&apos;</span><br/>
						;<br/>
						<br/>
						Fullname:&nbsp;<br/>
						&nbsp;&nbsp;(firstname=ID)?&nbsp;lastname=ID<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			The sample rule <em>Person</em> defines multiline comments (<span class="inlinecode">ML_COMMENT</span>), single-line comments (<span class="inlinecode">SL_COMMENT</span>), and white
			space (<span class="inlinecode">WS</span>) to be allowed between
			 the <em>name</em> and the <em>age</em>. Because the rule <em>Fullname</em> does not introduce an own set of hidden terminals, it allows the same symbols to appear 
			 between <em>firstname</em> and <em>lastname</em> as the calling rule <em>Person</em>. Thus, the following input is perfectly valid for the given grammar snippet:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						John&nbsp;<span class="comment">/*&nbsp;comment&nbsp;*/</span>&nbsp;Smith&nbsp;<span class="comment">//&nbsp;line&nbsp;comment<br/>
						</span><span class="comment">/*&nbsp;comment&nbsp;*/</span><br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;<span class="comment">//&nbsp;line&nbsp;comment</span>
					</p>
				</div>
			</div>
			</p>
			<p>
			A list of all default terminals like <span class="inlinecode">WS</span> can be found in section <a href="020-grammar-language.php#grammarMixins" title="Go to &quot;Grammar Mixins&quot;">Grammar Mixins</a>.
			</p>
			<a name="datatypeRules" ></a>
			<h2>Data Type Rules</h2>
			<p>
			Data type rules are parsing-phase rules, which create instances of <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EDataType.html" title="org.eclipse.emf.ecore.EDataType">EDataType</abbr></a> instead of <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a>. Thinking about it, one may discover 
			that they are quite similar to terminal rules.
			However, the nice thing about data type rules is that they are actually parser rules and are therefore 
			</p>
			<p>
			<ol>
			  <li>context sensitive and </li>
			  <li>allow for use of hidden tokens.</li>
			</ol>
			</p>
			<p>
			Assuming you want to define a rule to consume Java-like qualified names (e.g. &quot;foo.bar.Baz&quot;)
			you could write:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						QualifiedName&nbsp;:<br/>
						&nbsp;&nbsp;ID&nbsp;(<span class="string">&apos;.&apos;</span>&nbsp;ID)*<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			In contrast to a terminal rule this is only valid in certain contexts, i.e. it won't conflict with the rule <em>ID</em>.
			If you had defined it as a terminal rule, it would possibly hide the simple <em>ID</em> rule.
			</p>
			<p>
			In addition when the <em>QualifiedName</em> been defined as a data type rule, it is allowed to use hidden 
			tokens (e.g. <span class="inlinecode"><span class="comment">/*&nbsp;comment&nbsp;*/</span></span> between the segment IDs and dots (e.g. <span class="inlinecode">foo<span class="comment">/*&nbsp;comment&nbsp;*/</span>.&nbsp;bar&nbsp;.&nbsp;Baz</span>).
			</p>
			<p>
			Return types can be specified in the same way as for terminal rules:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						QualifiedName&nbsp;<span class="keyword">returns</span>&nbsp;ecore::EString&nbsp;:&nbsp;<br/>
						&nbsp;&nbsp;ID&nbsp;(<span class="string">&apos;.&apos;</span>&nbsp;ID)*<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			Note that rules that do not call other parser rules and do neither contain any actions nor <a href="020-grammar-language.php#assignments" title="Go to &quot;Assignments&quot;">assignments</a>, are
			 considered to be data type rules and the data type <a class="jdoc" href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="java.lang.String">EString</abbr></a> is implied if none has been explicitly declared.
			</p>
			<p>
			<a href="090-valueconverter.php" title="Go to &quot;Value Converter&quot;">Value converters</a> are used to transform the parsed string to the actually returned
			data type value.
			</p>
			<a name="syntax_8" ></a>
			<h2>Enum Rules</h2>
			<p>
			Enum rules return enumeration literals from strings. They can be seen as a shortcut for data type rules with specific value converters.
			The main advantage of enum rules is their simplicity, type safety and therefore nice validation. Furthermore it is possible
			 to infer enums and their respective literals during the Ecore model transformation.
			</p>
			<p>
			If you want to define a <span class="inlinecode">ChangeKind</span> from <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/change/package-summary.html" >org.eclipse.emf.ecore.change/model/Change.ecore</a> with <em>ADD</em>, <em>MOVE</em> and <em>REMOVE</em> you could write:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">enum</span>&nbsp;ChangeKind&nbsp;:<br/>
						&nbsp;&nbsp;ADD&nbsp;|&nbsp;MOVE&nbsp;|&nbsp;REMOVE<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			It is even possible to use alternative literals for your enums or reference an enum value twice:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">enum</span>&nbsp;ChangeKind&nbsp;:<br/>
						&nbsp;&nbsp;ADD&nbsp;=&nbsp;<span class="string">&apos;add&apos;</span>&nbsp;|&nbsp;ADD&nbsp;=&nbsp;<span class="string">&apos;+&apos;</span>&nbsp;|&nbsp;<br/>
						&nbsp;&nbsp;MOVE&nbsp;=&nbsp;<span class="string">&apos;move&apos;</span>&nbsp;|&nbsp;MOVE&nbsp;=&nbsp;<span class="string">&apos;-&gt;&apos;</span>&nbsp;|&nbsp;<br/>
						&nbsp;&nbsp;REMOVE&nbsp;=&nbsp;<span class="string">&apos;remove&apos;</span>&nbsp;|&nbsp;REMOVE&nbsp;=&nbsp;<span class="string">&apos;-&apos;</span><br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			Please note, that Ecore does not support unset values for enums. If you define a grammar like
			</p>
			<p>
			<span class="inlinecode">Element:&nbsp;<span class="string">"element"</span>&nbsp;name=ID&nbsp;(value=SomeEnum)?;</span>
			</p>
			<p>
			with the input of
			</p>
			<p>
			<span class="inlinecode">element&nbsp;Foo</span>
			</p>
			<p>
			the resulting value of the element <em>Foo</em> will hold the enum value with the internal representation of <span class="inlinecode">0</span> (zero). 
			When generating the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> from your grammar this will be the first literal you define. As a workaround 
			you could introduce a dedicated none-value or order the enums accordingly. Note that it is not possible to define 
			an enum literal with an empty textual representation.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">enum</span>&nbsp;Visibility:&nbsp;<br/>
						&nbsp;&nbsp;package&nbsp;|&nbsp;private&nbsp;|&nbsp;protected&nbsp;|&nbsp;public<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			You can overcome this by modifying the infered Ecore model through a <a href="020-grammar-language.php#customPostProcessing" title="Go to &quot;Customized Post Processing&quot;">model to model transformation</a>.
			However, instead of post processing, an explicitly imported metamodel is recommend.
			</p>
			<a name="antlr_errors" ></a>
			<h2>Syntactic Predicates</h2>
			<p>
			It's sometimes not easily possible to define an <span class="inlinecode">LL(*)</span> grammar for a given language that parses
			all possible valid input files and still produces abstract syntax graphs that mimic the actual structure
			of the files. There are even cases that cannot be described with an unambiguous grammar. There are solutions
			that allow to deal with this problem:
			</p>
			<p>
			<ul>
			  <li>Enable Backtracking: Xtext allows to enable backtracking for the ANTLR parser generator. This
			  	is usually not recommended since it influences error message strategies at runtime and shadows actually
			  	existing problems in the grammar.</li>
			  <li>Syntactic Predicates: The grammar language enables users to guide the parser in case of ambiguities.
			  	This mechanism is achieved by syntactic predicates. Since they affect only a very small part of the
			  	grammar, syntactic predicates are the recommended approach to handle ANTLR error messages during
			  	the parser generation.</li>
			</ul>
			</p>
			<p>
			The classical example for ambiguous language parts is the <em>Dangling Else Problem</em>. A conditional in
			a programming language usually looks like this:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">if</span>&nbsp;(isTrue())&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;doStuff();&nbsp;<br/>
						<span class="keyword">else</span>&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;dontDoStuff();
					</p>
				</div>
			</div>
			</p>
			<p>
			The problems becomes more obvious as soon as nested conditions are used:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">if</span>&nbsp;(isTrue())<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(isTrueAsWell())&nbsp;&nbsp;&nbsp;&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doStuff();&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span>&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dontDoStuff();
					</p>
				</div>
			</div>
			</p>
			<p>
			Where does the <span class="inlinecode"><span class="keyword">else</span></span> branch belong to? This question can be answered by a quick look into the language
			specification which tells that the <span class="inlinecode"><span class="keyword">else</span></span> branch is part of the inner condition. However, the parser
			generator cannot be convinced that easy. We have to guide it to this decision point by means of syntactic
			predicates which are expressed by a leading <span class="inlinecode">=&gt;</span> operator.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Condition:&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">&apos;if&apos;</span>&nbsp;<span class="string">&apos;(&apos;</span>&nbsp;condition=BooleanExpression&nbsp;<span class="string">&apos;)&apos;</span>&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then=Expression&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(=&gt;<span class="string">&apos;else&apos;</span>&nbsp;else=Expression)?
					</p>
				</div>
			</div>
			</p>
			<p>
			The parser understands the predicate basically like this: If you are at this particular decision point
			and you don't know what to do, look for the <span class="inlinecode"><span class="keyword">else</span></span> keyword and if it's present. Don't try to
			choose the other option that would start with an <span class="inlinecode"><span class="keyword">else</span></span> keyword, too.
			</p>
			<p>
			Well chosen predicates allow to solve most ambiguities and backtracking can often be disabled. 
			</p>
		<a name="metamodelInference" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Ecore Model Inference</h1>
			<div class="toc">
			  <ul>
			    <li><a href="020-grammar-language.php#metamodelInference_3" >Type and Package Generation</a></li>
			    <li><a href="020-grammar-language.php#metamodelInference_4" >Feature and Type Hierarchy Generation</a></li>
			    <li><a href="020-grammar-language.php#metamodelInference_5" >Enum Literal Generation</a></li>
			    <li><a href="020-grammar-language.php#metamodelInference_6" >Feature Normalization</a></li>
			    <li><a href="020-grammar-language.php#customPostProcessing" >Customized Post Processing</a></li>
			    <li><a href="020-grammar-language.php#metamodelInference_8" >Error Conditions</a></li>
			  </ul>
			</div>
			<p>
			The Ecore model (or meta model) of a textual language describes the structure of its abstract syntax trees (AST). 
			</p>
			<p>
			Xtext uses Ecore's <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackages</abbr></a> to define Ecore models. Ecore models are declared to be either inferred (generated) 
			from the grammar or imported. 
			By using the <span class="inlinecode"><span class="keyword">generate</span></span> directive, one tells Xtext to derive an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> from the grammar. 
			</p>
			<a name="metamodelInference_3" ></a>
			<h2>Type and Package Generation</h2>
			<p>
			Xtext creates
			</p>
			<p>
			<ul>
			  <li>an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> <ul>
			    <li>for each generate-package declaration. After the directive <span class="inlinecode"><span class="keyword">generate</span></span> a list of parameters follows. The <em>name</em> of the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> 
			    	will be set to the first parameter, its <em>nsURI</em> to the second parameter. An optional alias as the third parameter allows 
			    	to distinguish generated <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackages</abbr></a> later. Only one generated package declaration 
			    	per alias is allowed.</li>
			  </ul>
			  </li>
			  <li>an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> <ul>
			    <li>for each return type of a parser rule. If a parser rule does not define a return type, an implicit one with the same 
			    	name as the rule itself is assumed. You can specify more than one rule that return the same type but only one <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> 
			    	will be generated.</li>
			    <li>for each type defined in an action or a cross-reference.</li>
			  </ul>
			  </li>
			  <li>an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EEnum.html" title="org.eclipse.emf.ecore.EEnum">EEnum</abbr></a> <ul>
			    <li>for each return type of an enum rule.</li>
			  </ul>
			  </li>
			  <li>an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EDataType.html" title="org.eclipse.emf.ecore.EDataType">EDataType</abbr></a> <ul>
			    <li>for each return type of a terminal rule or a data type rule.</li>
			  </ul>
			  </li>
			</ul>
			</p>
			<p>
			All <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClasses</abbr></a>, <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EEnum.html" title="org.eclipse.emf.ecore.EEnum">EEnums</abbr></a>, and 
			<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EDataType.html" title="org.eclipse.emf.ecore.EDataType">EDataTypes</abbr></a> are added to the <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> referred to 
			by the alias provided in the type reference they were created from.
			</p>
			<a name="metamodelInference_4" ></a>
			<h2>Feature and Type Hierarchy Generation</h2>
			<p>
			While walking through the grammar, the algorithm keeps track of a set of the currently possible return types to add features to. 
			<ul>
			  <li>Entering a parser rule the set contains only the return type of the rule. </li>
			  <li>Entering an element of an alternative the set is reset to the same state it was in when entering the first option of 
			  the alternative. </li>
			  <li>Leaving an alternative the set contains the union of all types at the end of each of its paths.</li>
			  <li>After an optional element, the set is reset to the same state it was before entering it. </li>
			  <li>After a mandatory (non-optional) rule call or mandatory action the set contains only the return type of the called 
			  rule or action.</li>
			  <li>An optional rule call does not modify the set.</li>
			  <li>A rule call is optional, if its cardinality is <span class="inlinecode">?</span> or <span class="inlinecode">*</span>.</li>
			</ul>
			</p>
			<p>
			While iterating the parser rules Xtext creates
			<ul>
			  <li>an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttribute</abbr></a> in each current return type <ul>
			    <li>of type <a class="jdoc" href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html" title="java.lang.Boolean">EBoolean</abbr></a> for each feature assignment using the <span class="inlinecode">?=</span> operator. 
			    	No further <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReferences</abbr></a> or <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttributes</abbr></a> will be generated from this assignment.</li>
			    <li>for each assignment with the <span class="inlinecode">=</span> or <span class="inlinecode">+=</span> operator calling a terminal rule. Its type will be the return type of the called rule.</li>
			  </ul>
			  </li>
			  <li>an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> in each current return type <ul>
			    <li>for each assignment with the <span class="inlinecode">=</span> or <span class="inlinecode">+=</span> operator in a parser rule calling a parser rule. 
			    	The <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReference's</abbr></a> type will be the return type of the called parser rule.</li>
			    <li>for each assigned action. The reference's type will be set to the return type of the current calling rule. </li>
			  </ul>
			  </li>
			</ul>
			</p>
			<p>
			Each <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttribute</abbr></a> or <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> takes its name from the assignment 
			or action that caused it. Multiplicities will be <em>0..1</em> for assignments with the <span class="inlinecode">=</span> operator and <span class="inlinecode">0..*</span> for assignments 
			with the <span class="inlinecode">+=</span> operator. 
			</p>
			<p>
			Furthermore, each type that is added to the currently possible return types automatically extends the current return type 
			of the parser rule. You can specify additional common super types by means of &quot;artificial&quot; parser rules, that are never called, e.g.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						CommonSuperType:<br/>
						&nbsp;&nbsp;SubTypeA&nbsp;|&nbsp;SubTypeB&nbsp;|&nbsp;SubTypeC;
					</p>
				</div>
			</div>
			</p>
			<a name="metamodelInference_5" ></a>
			<h2>Enum Literal Generation</h2>
			<p>
			For each alternative defined in an enum rule, the transformer creates an enum literal, as long as no other literal with the same 
			name can be found. The <em>literal</em> property of the generated enum literal is set to the right hand side of the declaration. If 
			it is omitted, an enum literal with equal <em>name</em> and <em>literal</em> attributes is inferred.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">enum</span>&nbsp;MyGeneratedEnum:<br/>
						&nbsp;&nbsp;NAME&nbsp;=&nbsp;<span class="string">&apos;literal&apos;</span>&nbsp;|&nbsp;EQUAL_NAME_AND_LITERAL;
					</p>
				</div>
			</div>
			</p>
			<a name="metamodelInference_6" ></a>
			<h2>Feature Normalization</h2>
			<p>
			In the next step the generator examines all generated <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClasses</abbr></a> and lifts up similar features to super types
			 if there is more than one subtype and the feature is defined in every subtypes. This does even work for multiple super types.
			</p>
			<a name="customPostProcessing" ></a>
			<h2>Customized Post Processing</h2>
			<p>
			As a last step, the generator invokes the post processor for every generated Ecore model. The post processor expects an 
			Xtend1 file with name <em>MyDslPostProcessor.ext</em> (if the name of the grammar file is <em>MyDsl.xtext</em>) in the same 
			folder as the grammar file. Further, for a successful invocation, the Xtend file must declare an extension 
			with signature <span class="inlinecode">process(xtext::GeneratedMetamodel)</span>. E.g.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						process(xtext::GeneratedMetamodel&nbsp;<span class="keyword">this</span>)&nbsp;:<br/>
						&nbsp;&nbsp;process(ePackage)<br/>
						;<br/>
						&nbsp;<br/>
						process(ecore::EPackage&nbsp;<span class="keyword">this</span>)&nbsp;:<br/>
						&nbsp;&nbsp;...&nbsp;do&nbsp;something<br/>
						;
					</p>
				</div>
			</div>
			</p>
			<p>
			The invoked extension can then augment the generated Ecore model in place. Some typical use cases are to:
			<ul>
			  <li>set default values for attributes,</li>
			  <li>add container references as opposites of existing containment references, or</li>
			  <li>add operations with implementation using a body annotation.</li>
			</ul>
			</p>
			<p>
			Great care must be taken to not modify the Ecore model in a way preventing the Xtext parser from working correctly
			 (e.g. removing or renaming model elements).
			</p>
			<p>
			<em>Note: If you face the situation where you think that post processing may help, you should strongly
			consider to use imported packages instead of generated packages.</em>
			</p>
			<a name="metamodelInference_8" ></a>
			<h2>Error Conditions</h2>
			<p>
			The following conditions cause an error
			<ul>
			  <li>An <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttribute</abbr></a> or <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> has two different types or different cardinality.</li>
			  <li>There is an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttribute</abbr></a> and an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> with the same name in the same <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a>.</li>
			  <li>There is a cycle in the type hierarchy.</li>
			  <li>An new <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html" title="org.eclipse.emf.ecore.EAttribute">EAttribute</abbr></a>, <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html" title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> or super type is added to an imported type.</li>
			  <li>An <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> is added to an imported <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a>.</li>
			  <li>An undeclared alias is used. </li>
			  <li>An imported Ecore model cannot be loaded.</li>
			</ul>
			</p>
		<a name="grammarMixins" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Grammar Mixins</h1>
			<p>
			Xtext supports the reuse of existing grammars. Grammars that are created via the Xtext wizard use 
			<span class="inlinecode">org.eclipse.xtext.common.Terminals</span>
			by default which introduces a common set of terminal rules and defines reasonable defaults for hidden terminals.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">grammar</span>&nbsp;org.xtext.example.SecretCompartments&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;<span class="keyword">with</span>&nbsp;org.eclipse.xtext.common.Terminals<br/>
						<br/>
						<span class="keyword">generate</span>&nbsp;secrets&nbsp;<span class="string">"http://www.eclipse.org/secretcompartment"</span><br/>
						&nbsp;<br/>
						Statemachine:&nbsp;..
					</p>
				</div>
			</div>
			</p>
			<p>
			Mixing another grammar into a language makes the rules defined in that grammar referable. It is also possible to overwrite rules from the used grammar. 
			</p>
			<p>
			Example :
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">grammar</span>&nbsp;my.SuperGrammar<br/>
						...<br/>
						RuleA&nbsp;:&nbsp;<span class="string">"a"</span>&nbsp;stuff=RuleB;<br/>
						RuleB&nbsp;:&nbsp;<span class="string">"{"</span>&nbsp;name=ID&nbsp;<span class="string">"}"</span>;<br/>
						<br/>
						<span class="keyword">grammar</span>&nbsp;my.SubGrammar&nbsp;<span class="keyword">with</span>&nbsp;my.SuperGrammar<br/>
						<br/>
						Model&nbsp;:&nbsp;(ruleAs+=RuleA)*;<br/>
						<br/>
						<span class="comment">//&nbsp;overrides&nbsp;my.SuperGrammar.RuleB<br/>
						</span>RuleB&nbsp;:&nbsp;<span class="string">&apos;[&apos;</span>&nbsp;name=ID&nbsp;<span class="string">&apos;]&apos;</span>;
					</p>
				</div>
			</div>
			</p>
			<p>
			<em>Note that declared terminal rules always get a higher priority then imported terminal rules.</em>
			</p>
		<a name="grammarLanguage_6" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Common Terminals</h1>
			<p>
			Xtext ships with a default set of predefined, reasonable and often required terminal rules. The grammar
			for these common terminal rules is defined as follows:
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						<span class="keyword">grammar</span>&nbsp;org.eclipse.xtext.common.Terminals&nbsp;<br/>
						&nbsp;<span class="keyword">hidden</span>(WS,&nbsp;ML_COMMENT,&nbsp;SL_COMMENT)<br/>
						<span class="keyword">import</span>&nbsp;<span class="string">"http://www.eclipse.org/emf/2002/Ecore"</span>&nbsp;<span class="keyword">as</span>&nbsp;ecore<br/>
						<span class="keyword">terminal</span>&nbsp;ID&nbsp;:&nbsp;<br/>
						&nbsp;<span class="string">&apos;^&apos;</span>?(<span class="string">&apos;a&apos;</span>..<span class="string">&apos;z&apos;</span>|<span class="string">&apos;A&apos;</span>..<span class="string">&apos;Z&apos;</span>|<span class="string">&apos;_&apos;</span>)(<span class="string">&apos;a&apos;</span>..<span class="string">&apos;z&apos;</span>|<span class="string">&apos;A&apos;</span>..<span class="string">&apos;Z&apos;</span>|<span class="string">&apos;_&apos;</span>|<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>)*;<br/>
						<span class="keyword">terminal</span>&nbsp;INT&nbsp;<span class="keyword">returns</span>&nbsp;ecore::EInt:&nbsp;<br/>
						&nbsp;(<span class="string">&apos;0&apos;</span>..<span class="string">&apos;9&apos;</span>)+;<br/>
						<span class="keyword">terminal</span>&nbsp;STRING&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<br/>
						&nbsp;<span class="string">&apos;"&apos;</span>&nbsp;(&nbsp;<span class="string">&apos;\\&apos;</span>(<span class="string">&apos;b&apos;</span>|<span class="string">&apos;t&apos;</span>|<span class="string">&apos;n&apos;</span>|<span class="string">&apos;f&apos;</span>|<span class="string">&apos;r&apos;</span>|<span class="string">&apos;u&apos;</span>|<span class="string">&apos;"&apos;</span>|<span class="string">"&apos;"</span>|<span class="string">&apos;\\&apos;</span>)&nbsp;|&nbsp;!(<span class="string">&apos;\\&apos;</span>|<span class="string">&apos;"&apos;</span>)&nbsp;)*&nbsp;<span class="string">&apos;"&apos;</span>&nbsp;|<br/>
						&nbsp;<span class="string">"&apos;"</span>&nbsp;(&nbsp;<span class="string">&apos;\\&apos;</span>(<span class="string">&apos;b&apos;</span>|<span class="string">&apos;t&apos;</span>|<span class="string">&apos;n&apos;</span>|<span class="string">&apos;f&apos;</span>|<span class="string">&apos;r&apos;</span>|<span class="string">&apos;u&apos;</span>|<span class="string">&apos;"&apos;</span>|<span class="string">"&apos;"</span>|<span class="string">&apos;\\&apos;</span>)&nbsp;|&nbsp;!(<span class="string">&apos;\\&apos;</span>|<span class="string">"&apos;"</span>)&nbsp;)*&nbsp;<span class="string">"&apos;"</span>;&nbsp;<br/>
						<span class="keyword">terminal</span>&nbsp;ML_COMMENT&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<br/>
						&nbsp;<span class="string">&apos;/*&apos;</span>&nbsp;-&gt;&nbsp;<span class="string">&apos;*/&apos;</span>;<br/>
						<span class="keyword">terminal</span>&nbsp;SL_COMMENT&nbsp;:&nbsp;<br/>
						&nbsp;<span class="string">&apos;//&apos;</span>&nbsp;!(<span class="string">&apos;\n&apos;</span>|<span class="string">&apos;\r&apos;</span>)*&nbsp;(<span class="string">&apos;\r&apos;</span>?&nbsp;<span class="string">&apos;\n&apos;</span>)?;<br/>
						<span class="keyword">terminal</span>&nbsp;WS&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<br/>
						&nbsp;(<span class="string">&apos;&nbsp;&apos;</span>|<span class="string">&apos;\t&apos;</span>|<span class="string">&apos;\r&apos;</span>|<span class="string">&apos;\n&apos;</span>)+;<br/>
						<span class="keyword">terminal</span>&nbsp;ANY_OTHER:&nbsp;<br/>
						&nbsp;.;
					</p>
				</div>
			</div>
			</p>
		<div id="disqus_thread"></div>
		<script type="text/javascript" src="documentationRoot.js"></script>
		<script type="text/javascript">
		    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		    var disqus_shortname = 'xtext'; // required: replace example with your forum shortname
		
		    // The following are highly recommended additional parameters. Remove the slashes in front to use.
		    var disqus_identifier = 'grammarLanguage';
		    var disqus_url = documentationRoot+'020-grammar-language.php';
		
		    /* * * DON'T EDIT BELOW THIS LINE * * */
		    (function() {
		        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		    })();
		</script>
 		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	</div>
	<br style="clear:both;height:1em;">
